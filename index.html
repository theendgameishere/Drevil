 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WorkQuest: Hero Edition</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
  <style>
    :root {
      --hero-bg: #1a202c;
      --panel-bg: #2d3748;
      --border-color: #000000;
      --primary-yellow: #facc15;
      --primary-blue: #3b82f6;
      --primary-red: #ef4444;
      --text-light: #f7fafc;
    }
    body {
      background-color: var(--hero-bg);
      background-image:
        radial-gradient(circle at 25px 25px, rgba(255,255,255,0.10) 2%, transparent 0%),
        radial-gradient(circle at 75px 75px, rgba(255,255,255,0.10) 2%, transparent 0%);
      background-size: 100px 100px;
      font-family: 'Bangers', cursive;
      color: var(--text-light);
      letter-spacing: 1.5px;
    }
    .comic-panel {
      background: linear-gradient(120deg, #2d3748 80%, #374151 100%);
      border: 4px solid var(--border-color);
      border-radius: 12px;
      box-shadow: 7px 7px 0px 0px var(--border-color), 0 0 36px 0 #0007;
      position: relative;
      overflow: hidden;
    }
    .avatar-big {
      width: 95px;
      height: 95px;
      border-radius: 50%;
      border: 4px solid #222;
      box-shadow: 0 4px 16px #000a;
      object-fit: cover;
      background: #fff;
      margin: 0 auto;
      display: block;
    }
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
      margin-top: 0.75rem;
    }
    .day-cell {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1/1;
      font-size: 1.5rem;
      cursor: pointer;
      border: 3px solid var(--border-color);
      background-color: #4a5568;
      font-family: 'Bangers', cursive;
      font-size: 2rem;
      transition: all 0.15s;
      position: relative;
      min-height: 54px;
    }
    .day-cell:hover {
      transform: scale(1.05);
      background: linear-gradient(100deg, #718096 80%, #a0aec0 100%);
    }
    .day-cell.other-month {
      background-color: var(--panel-bg);
      color: #718096;
      cursor: not-allowed;
      opacity: 0.6;
    }
    .day-cell.scheduled {
      background: linear-gradient(100deg, #3b82f6 85%, #facc15 120%);
      color: var(--text-light);
      border-color: var(--primary-yellow);
      text-shadow: 2px 2px 0px var(--border-color);
      font-weight: bold;
    }
    .comic-button {
      border: 3px solid var(--border-color);
      text-shadow: 2px 2px 0px #0003;
      background: linear-gradient(90deg, #3b82f6 60%, #60a5fa 100%);
      font-family: 'Bangers', cursive;
      letter-spacing: 1.5px;
      padding: 0.5rem 1.5rem;
      font-size: 1.5rem;
      border-radius: 0.5rem;
      color: #fff;
      transition: all 0.15s;
      cursor: pointer;
      display: inline-block;
    }
    .file-input-wrapper {
        position: relative;
        overflow: hidden;
        display: inline-block;
        width: 100%;
    }
    .file-input-wrapper input[type=file] {
        font-size: 100px;
        position: absolute;
        left: 0;
        top: 0;
        opacity: 0;
        cursor: pointer;
    }
    .file-input-wrapper .comic-button {
        width: 100%;
        text-align: center;
        background: linear-gradient(90deg, #4b5563 60%, #6b7280 100%);
    }
    @media (max-width: 900px) {
      .calendar-grid { font-size: 1.1rem; }
      .avatar-big { width: 70px; height: 70px; }
    }
    @media (max-width: 600px) {
      .header-row { grid-template-columns: 1fr !important; }
      .calendar-grid { font-size: 0.97rem; }
    }
  </style>
</head>
<body>
<div class="container mx-auto px-2 py-4 max-w-xl">

  <div class="grid header-row grid-cols-3 gap-2 mb-4 items-center">
    <div class="comic-panel text-center py-4 flex flex-col items-center justify-center">
      <div class="text-xl md:text-2xl" style="color:var(--primary-yellow);text-shadow:2px 2px 0px var(--border-color);">HOURS LOGGED</div>
      <div class="text-3xl md:text-4xl font-bold mt-2">16.25</div>
    </div>
    <div class="flex flex-col items-center justify-center">
      <img 
        src="https://raw.githubusercontent.com/theendgameishere/Drevil/refs/heads/main/dr-evil-shane.jpg.png"
        alt="Dr. Evil Shane"
        class="avatar-big shadow-lg"
      >
    </div>
    <div class="comic-panel text-center py-4 flex flex-col items-center justify-center">
      <div class="text-xl md:text-2xl" style="color:var(--primary-red);text-shadow:2px 2px 0px var(--border-color);">HOURS MISSED</div>
      <div class="text-3xl md:text-4xl font-bold mt-2">0</div>
    </div>
  </div>

  <div class="comic-panel mx-auto p-4 max-w-md" style="margin-bottom:1.5rem;">
    <div class="flex justify-between items-center mb-2">
      <button id="prev-month" class="comic-button">PREV</button>
      <span id="month-year-header" class="text-2xl md:text-3xl font-bold" style="color:var(--primary-yellow);text-shadow:2px 2px 0px var(--border-color);">AUGUST 2025</span>
      <button id="next-month" class="comic-button">NEXT</button>
    </div>
    <div id="calendar-grid" class="calendar-grid"></div>
  </div>

  <div class="comic-panel p-4 mt-4 text-center flex flex-col gap-3 items-center max-w-md mx-auto">
    <label class="text-xl md:text-2xl font-bold" style="color:var(--primary-yellow);text-shadow:2px 2px 0px var(--border-color);">MISSION CONTROL</label>
    <button id="toggle-upload-btn" class="comic-button">UPLOAD SCHEDULE</button>
    <div id="upload-panel" class="hidden w-full p-3 bg-gray-800 rounded-lg border-2 border-black">
        <p class="mb-2 text-base">Select schedule screenshot:</p>
        <div class="file-input-wrapper">
          <button class="comic-button">CHOOSE FILE</button>
          <input type="file" id="schedule-upload" accept="image/*">
        </div>
        <p id="file-name-display" class="text-sm mt-2 text-gray-400">No file selected.</p>
    </div>
  </div>

</div>

<div id="modal-backdrop" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50">
    <div id="modal" class="comic-panel w-full max-w-sm sm:max-w-md m-4 p-0 relative shadow-2xl bg-yellow-200 border-4 border-black rounded-xl overflow-hidden" style="background-image: none;">
      <div class="flex items-center gap-4 p-4 pb-0">
        <div class="flex-1 text-center">
          <h2 id="modal-title" class="text-2xl sm:text-3xl font-bold text-black mb-0" style="font-family: 'Bangers', cursive; letter-spacing: 1px;">SHIFT DETAILS</h2>
          <div id="modal-date" class="text-black text-base font-semibold"></div>
        </div>
        <button id="close-modal" class="ml-auto comic-button bg-primary-red rounded-full w-10 h-10 flex items-center justify-center text-2xl p-0 absolute top-2 right-2">X</button>
      </div>
      <div id="modal-content" class="text-black px-6 py-3 text-lg font-bold font-sans leading-relaxed"></div>
    </div>
</div>

<script>
// --- SCHEDULE DATA: This is where the magic will happen ---
// For now, it's the dummy data. The goal is to populate this from the uploaded image.
let fullSchedule = {
  '2025-8-3': [ { name: 'Shane', start: '1:00 PM', end: '9:15 PM' }, { name: 'Deanthony', start: '4:00 PM', end: '9:15 PM' } ],
  '2025-8-5': [ { name: 'Shane', start: '5:15 PM', end: '9:15 PM' }, { name: 'Dylan', start: '12:15 PM', end: '9:15 PM' }, ],
  '2025-8-6': [ { name: 'Shane', start: '4:15 PM', end: '9:15 PM' }, { name: 'Dylan', start: '2:00 PM', end: '9:15 PM' }, ]
};

const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
let currentDate = new Date('2025-08-01T12:00:00');

// --- Element Selectors ---
const calendarGrid = document.getElementById('calendar-grid');
const monthYearHeader = document.getElementById('month-year-header');
const prevMonthBtn = document.getElementById('prev-month');
const nextMonthBtn = document.getElementById('next-month');
const modalBackdrop = document.getElementById('modal-backdrop');
const modal = document.getElementById('modal');
const modalTitle = document.getElementById('modal-title');
const modalContent = document.getElementById('modal-content');
const closeModalBtn = document.getElementById('close-modal');
const modalDate = document.getElementById('modal-date');
const toggleUploadBtn = document.getElementById('toggle-upload-btn');
const uploadPanel = document.getElementById('upload-panel');
const scheduleUploadInput = document.getElementById('schedule-upload');
const fileNameDisplay = document.getElementById('file-name-display');

// === NEW SCRIPT FOR UPLOAD PANEL ===
toggleUploadBtn.addEventListener('click', () => {
    uploadPanel.classList.toggle('hidden');
});

scheduleUploadInput.addEventListener('change', (e) => {
    if (e.target.files.length > 0) {
        fileNameDisplay.textContent = e.target.files[0].name;
    } else {
        fileNameDisplay.textContent = 'No file selected.';
    }
});
// === END OF NEW SCRIPT ===


function parseTime(str) {
  // ... (rest of the script is unchanged)
  let [time, period] = str.split(' ');
  let [h, m] = time.split(':').map(Number);
  if (period === 'PM' && h !== 12) h += 12;
  if (period === 'AM' && h === 12) h = 0;
  return h * 60 + (m || 0);
}
function hasOverlap(a, b) {
  let aStart = parseTime(a.start), aEnd = parseTime(a.end);
  if (isNaN(aStart) || isNaN(aEnd)) return false; // Handle invalid times
  let bStart = parseTime(b.start), bEnd = parseTime(b.end);
  if (isNaN(bStart) || isNaN(bEnd)) return false;
  return (aStart < bEnd && bStart < aEnd);
}
function renderCalendar() {
  calendarGrid.innerHTML = '';
  const year = currentDate.getFullYear();
  const month = currentDate.getMonth();
  monthYearHeader.textContent = `${monthNames[month]} ${year}`;
  const dayLabels = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
  dayLabels.forEach(lbl => {
    const cell = document.createElement('div');
    cell.textContent = lbl;
    cell.className = "text-base font-bold text-center pb-1 text-yellow-300";
    calendarGrid.appendChild(cell);
  });
  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month + 1, 0).getDate();
  const prevMonthDays = new Date(year, month, 0).getDate();
  let startPad = firstDay;
  for (let i = 0; i < startPad; i++) {
    const dayNum = prevMonthDays - startPad + i + 1;
    const cell = document.createElement('div');
    cell.className = "day-cell other-month";
    cell.textContent = dayNum;
    calendarGrid.appendChild(cell);
  }
  for (let day = 1; day <= daysInMonth; day++) {
    const date = new Date(year, month, day);
    const key = `${year}-${month+1}-${day}`;
    const cell = document.createElement('div');
    cell.className = "day-cell";
    cell.innerHTML = `<span class="day-number">${day}</span>`;
    if (fullSchedule[key] && fullSchedule[key].some(s => s.name.toLowerCase() === 'shane')) {
      cell.classList.add('scheduled');
      cell.tabIndex = 0;
      cell.setAttribute('role', 'button');
      cell.setAttribute('aria-label', `See schedule for ${monthNames[month]} ${day}`);
      cell.addEventListener('click', () => showModalForDay(key, date));
      cell.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') showModalForDay(key, date);
      });
    }
    calendarGrid.appendChild(cell);
  }
  const totalCells = dayLabels.length + startPad + daysInMonth;
  const nextDays = (7 - (totalCells % 7)) % 7;
  for (let i = 1; i <= nextDays; i++) {
    const cell = document.createElement('div');
    cell.className = "day-cell other-month";
    cell.textContent = i;
    calendarGrid.appendChild(cell);
  }
}
function showModalForDay(key, dateObj) {
  const dayEvents = fullSchedule[key];
  if (!dayEvents) return;
  modalTitle.textContent = "SHIFT DETAILS";
  modalDate.textContent = `${monthNames[dateObj.getMonth()]} ${dateObj.getDate()}, ${dateObj.getFullYear()}`;
  const shaneShifts = dayEvents.filter(ev => ev.name.toLowerCase() === 'shane');
  const overlaps = [];
  const rest = [];
  dayEvents.forEach(ev => {
    if (ev.name.toLowerCase() === 'shane') return;
    if (shaneShifts.some(s => hasOverlap(s, ev))) overlaps.push(ev);
    else rest.push(ev);
  });

  let html = '';
  shaneShifts.forEach(ev => {
    html += `<div class="mb-2" style="font-size:1.25em;">
      <span style="color:#ef4444;font-weight:900;">Shane:</span>
      <span style="color:#111;">${ev.start} – ${ev.end}</span>
    </div>`;
  });
  overlaps.forEach(ev => {
    html += `<div class="mb-2">
      <span style="color:#2563eb;font-weight:bold;">${ev.name}:</span>
      <span style="color:#222;">${ev.start} – ${ev.end}</span>
    </div>`;
  });
  rest.forEach(ev => {
    html += `<div class="mb-2">
      <span style="color:#111;">${ev.name}:</span>
      <span style="color:#444;">${ev.start} – ${ev.end}</span>
    </div>`;
  });

  modalContent.innerHTML = html;
  modalBackdrop.classList.remove('hidden');
  setTimeout(() => { modal.style.transform = 'scale(1)'; }, 30);
  trapFocus(modal);
}
function hideModal() {
  modal.style.transform = 'scale(0)';
  setTimeout(() => {
    modalBackdrop.classList.add('hidden');
    document.removeEventListener('keydown', trapFocusHandler, true);
  }, 250);
}
let trapFocusHandler = null;
function trapFocus(el) {
  const focusable = el.querySelectorAll('button, [tabindex]:not([tabindex="-1"])');
  const first = focusable[0];
  const last = focusable[focusable.length - 1];
  trapFocusHandler = function(e) {
    if (!modalBackdrop.classList.contains('hidden')) {
      if (e.key === 'Tab') {
        if (e.shiftKey && document.activeElement === first) {
          e.preventDefault(); last.focus();
        } else if (!e.shiftKey && document.activeElement === last) {
          e.preventDefault(); first.focus();
        }
      } else if (e.key === 'Escape') {
        hideModal();
      }
    }
  };
  document.addEventListener('keydown', trapFocusHandler, true);
  modalBackdrop.addEventListener('click', (e) => {
    if (e.target === modalBackdrop) hideModal();
  });
  setTimeout(() => { first && first.focus(); }, 120);
}
closeModalBtn.addEventListener('click', hideModal);

prevMonthBtn.addEventListener('click', () => {
  currentDate.setMonth(currentDate.getMonth() - 1);
  renderCalendar();
});

nextMonthBtn.addEventListener('click', () => {
  currentDate.setMonth(currentDate.getMonth() + 1);
  renderCalendar();
});

// Initial render
renderCalendar();

</script>
</body>
</html>
     
